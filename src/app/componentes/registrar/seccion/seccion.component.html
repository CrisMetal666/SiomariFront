<div class="col-xs-6">

  <h2>Registro de seccion</h2>

  <br>

  <ng4-loading-spinner> </ng4-loading-spinner>

  <div *ngIf="estado == 1" class="alert alert-success" role="alert">
    Sección registrada exitosamente
  </div>
  <div *ngIf="estado == 0" class="alert alert-danger" role="alert">
    No se pudo registrar la sección
  </div>
  <div *ngIf="estado == 2" class="alert alert-warning" role="alert">
    La seccion ya ha sido registrada
  </div>

  <form #form="ngForm" (ngSubmit)="registrar(form)" autocomplete="off">

    <div [ngClass]="(unidadId == -1 && unidad.touched) ? 'form-group has-error' : 'form-group'">
      <label class="control-label" for="unidad">Seleccione la unidad</label>
      <select #unidad="ngModel" [(ngModel)]="unidadId"  (change)="unidadChange()" name="unidad" class="form-control" id="unidad" required>
        <option value="-1">-- Seleccione --</option>
        <option *ngFor="let u of lstUnidad" value="{{u.id}}">{{u.nombre}}</option>
      </select>
      <span class="msg-error" *ngIf="unidadId == -1 && unidad.touched">La unidad es obligatoria</span>
    </div>

    <div [ngClass]="(seccion.zonaId.id == -1 && zona.touched) ? 'form-group has-error' : 'form-group'">
      <label class="control-label" for="zona">Seleccione la zona</label>
      <select #zona="ngModel" [(ngModel)]="seccion.zonaId.id" name="zona" class="form-control" id="zona">
        <option value="-1">-- Seleccione --</option>
        <option *ngFor="let z of lstZona" value="{{z.id}}">{{z.nombre}}</option>
        <option *ngIf="lstZona.length == 0" value="-1">No hay zonas en esa unidad</option>
      </select>
      <span class="msg-error" *ngIf="seccion.zonaId.id == -1 && zona.touched">La zona es obligatoria</span>
    </div>

    <div [ngClass]="(!nombre.valid && nombre.touched) ? 'form-group has-error' : 'form-group'">
      <label class="control-label" for="nombre">Nombre de la seccion</label>
      <input #nombre="ngModel" [(ngModel)]="seccion.nombre" name="nombre" type="text" class="form-control" placeholder="Ingrese nombre de la seccion" required/>
      <span class="msg-error" *ngIf="!nombre.valid && nombre.touched">El nombre es obligatorio</span>
    </div>

    <button [disabled]="!form.form.valid || seccion.zonaId.id == -1 || unidadId == -1" type="submit" class="btn btn-primary">Registrar</button>
  </form>
</div>