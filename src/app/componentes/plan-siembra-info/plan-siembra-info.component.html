<h1>Plan de siembras</h1>

<br/>

<ng4-loading-spinner> </ng4-loading-spinner>

<div *ngIf="estado == 0" class="alert alert-danger" role="alert">
  Ha ocurrido un error, intenta mas tarde.
</div>

<form (ngSubmit)="consultar()" class="form-inline">

  <div class="form-group mb-4">
    <ng2-completer [inputClass]="['form-control']" [datasource]="dataServiceCultivo" [minSearchLength]="3" [textSearching]="'Buscando...'"
      [placeholder]="'Buscar cultivo'" [textNoResults]="'Sin resultados'" (selected)="onCultivoSelect($event)" #cCultivo="ngModel"
      [(ngModel)]="searchCultivo" name="cultivoSearch" [clearUnselected]="true" required></ng2-completer>
  </div>
  <div class="form-group mb-4">
    <input [(ngModel)]="year" #cYear="ngModel" name="year" type="number" class="form-control" placeholder="Año" required>
  </div>
  <select [(ngModel)]="campania" #cCampania="ngModel" name="campania" class="form-control mb-4" required>
    <option value="">-- Seleccione la campaña --</option>
    <option value="A">A</option>
    <option value="B">B</option>
  </select>
  <button [disabled]="!cCultivo.valid || !cYear.valid || !cCampania.valid || cultivoId == 0" type="submit" class="btn btn-primary mb-2">Consultar</button>

</form>

<br/>

<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th class="text-center" class="text-vertical-center text-center" rowspan="2">Mes</th>
      <th colspan="3" class="text-center">Cultivo</th>
      <th class="text-center">Total</th>
    </tr>
    <tr>
      <th class="text-center">1 - 10</th>
      <th class="text-center">11 - 20</th>
      <th class="text-center">21 - 30</th>
      <th class="text-center">Has</th>
    </tr>
  </thead>
  <tbody>

    <tr *ngIf="lstPlaneacionInfo.length == 0">
      <td class="text-center" colspan="5">No hay registros</td>
    </tr>

    <tr *ngFor="let pi of lstPlaneacionInfo">
      <th class="text-center">{{pi.mes}}</th>
      <td class="text-center">{{pi.periodo1}}</td>
      <td class="text-center">{{pi.periodo2}}</td>
      <td class="text-center">{{pi.periodo3}}</td>
      <td class="text-center">{{pi.total}}</td>
    </tr>

  </tbody>
</table>